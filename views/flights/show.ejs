<%- include('../partials/header') %>

<section>
    <div>
        <div>
            <div class="content">
                <div>Airline:
                    <%= flight.airline %>
                </div>
            <br>
                <div>Airport:
                    <%= flight.airport %>
                </div>
            <br>
                <div>Flight Number:
                    <%= flight.flightNo %>
                </div>
            <br>
                <div>Departure:
                    <%= flight.departs %>
                </div>
            </div>
            <br>
                <div class="destination-container">
                <div class="destination-label">
                    <h3>Destination:</h3>
                </div>
                <div>
                    <% flight.destinations.forEach(destination => { %>
                        <div>
                            Airport: <%= destination.airport %>
                            <br><br>
                            Arrival: <%= destination.arrival %>
                        </div>
                    <% }) %>
                </div>
            </div>
        </div>
    </div>
</section>

<h3 class="form-bottom">Add Destination</h3>
<div class="table-container">
    <form action="/flights/<%= flight._id %>/destinations" method="POST">
        <label>Airline:
            <select name="airline">
                <option value="American">American</option>
                <option value="Southwest">Southwest</option>
                <option value="United">United</option>
                <option value="Spirit">Spirit</option>
                <option value="Frontier">Frontier</option>
            </select>
        </label>
        <label>Airport:
            <select name="airport">
                <option value="AUS">AUS</option>
                <option value="DFW">DFW</option>
                <option value="DEN" selected>DEN</option>
                <option value="LAX">LAX</option>
                <option value="SAN">SAN</option>
                <option value="GEG">GEG</option>
                <option value="SEA">SEA</option>
            </select>
        </label>
        <label for="arrival">Arrival Date/Time:</label>
        <input type="datetime-local" name="arrival" id="arrival" required>
        <button type="submit" class="destination-button">Add Destination</button>
    </div>
</form>

<div class="ticket-list">
    <h3>Tickets for this Flight:</h3>
    <ul>
        <% tickets.forEach(ticket => { %>
            <li>
                Seat: <%= ticket.seat %>
                Price: $<%= ticket.price.toFixed(2) %>
            </li>
        <% }) %>
    </ul>
</div>

<div class="new-ticket-link">
    <a href="/flights/<%= flight._id %>/tickets/new" class="btn btn-primary">
        Add New Ticket
    </a>
</div>


<%- include('../partials/footer') %>
